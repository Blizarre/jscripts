<html>
	<head>
		<script src="minified-web.js" ></script>
		<script src="fractal.js" ></script>
		<script type="x-shader/x-fragment" id="fractal">
precision lowp float;
uniform vec2 u_fractalPosition;
uniform float u_fractalZoom;
uniform float u_brightness;
const int MAX_ITER=1024;

void main(void)
{
	float c = 0.0, z2x = 0.0, z2y = 0.0;
	vec4 finalColor = vec4(0.0); 
	vec2 pos = vec2(gl_FragCoord.x/u_fractalZoom - u_fractalPosition.x, gl_FragCoord.y/u_fractalZoom - u_fractalPosition.y);// gl_PointCoord;
	vec2 z = vec2( 0, 0 );
	

	float tmp;
	int iterNumber;
	
	for(int i = 0; i < MAX_ITER; i++)
	{
	z2x = z.x * z.x;
	z2y = z.y * z.y;
	
			if(z2x + z2y > 4.0)
			{
					iterNumber = i;
					break;
			}
					
			tmp = z2x - z2y + pos.x;
			z.y = 2.0 * z.x * z.y + pos.y;
			z.x = tmp;
			
	}
			
	c = float(iterNumber) / float(MAX_ITER);        
	
	finalColor = u_brightness*vec4(vec3(c, c, c)* vec3(0.8, 0.75, 1.0), 1.0); 
	
	gl_FragColor =  finalColor;
}
		</script>

		<script type="x-shader/x-vertex" id="vertexShader">
attribute vec2 a_position;

uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

void main(void) {
	gl_Position = vec4(a_position, 0, 1);
} 
		</script>

	</head>
	<body>
		<div><canvas id="fractalCanvas">No canvas support</canvas></div>
		<div>Brightness: <input type="range" id="brightness" min="1" max="300" step="10" value="100" /></div>
		<div>Show Log: <input type="checkbox" id="showLog" checked="false" /><input type="button" id="reset" value="Reset" /></div> 
		<div><textarea style="width:100%; height:100px;" id="logger"></textarea></div>
	</body>
</html>